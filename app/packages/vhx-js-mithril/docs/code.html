<template name="code__js_mithril_intro">
  <section id="code--js_mithril_intro" class="padding-medium text--white">
    <span class="logo-mithril">○</span>
  </section>
</template>

<template name="code__js_mithril_folders">
  <section id="code--js-mithril-folders" class="padding-medium">
    {{#markdown}}
    --Folder Structure--
    {{/markdown}}

    {{#markdown}}
    |—application
      # scope.js
      # models.js
      # routes.js
      |-layouts
        # layout.index.js
        # layout.edit.js
      |-components
        |-sidebar
          # sidebar.ui.js
          # sidebar.state.js
          # sidebar.controller.js
          # sidebar.constants.js
        |-table
          # table.ui.js
          # table.state.js
          # table.controller.js
          # table.constants.js

    {{/markdown}}
  </section>
</template>

<template name="code__js_mithril_order">
  <section id="code--js-mithril-order" class="padding-medium">
    {{#markdown}}

    --File order--
    {{/markdown}}

    {{#markdown}}
    scope.js
    components/
    layouts/
    models.js
    routes.js

    {{/markdown}}
  </section>
</template>

<template name="code__js_mithril_namespace">
  <section id="code--js_mithril_namespace" class="padding-medium">
  {{#markdown}}
    --scope.js--
  {{/markdown}}

  {{#markdown}}

    var vhxm = {
      models: {},
      layouts: {
        index: {},
        edit: {}
      },
      components: {
        sidebar: {},
        table: {},
        header: {}
      }
    }

  {{/markdown}}
  </section>
</template>

<template name="code__js_mithril_layouts">
  <section id="code--js_mithril-layouts" class="padding-medium">
  {{#markdown}}
    --Layouts--
  {{/markdown}}

  {{#markdown}}

    // an empty layout with an empty div
    vhxm.layouts.index = {
      view: function() {
        return m("div");
      }
    };

    // a layout that includes child components
    vhxm.layouts.index = {
      view: function() {
        return m("div", [
          m.component(vhxm.components.table.container),
          m.component(vhxm.components.sidebar.container)
        ]);
      }
    };

  {{/markdown}}
  </section>
</template>

<template name="code__js_mithril_components">
  <section id="code--js_mithril-components" class="padding-medium">
    {{#markdown}}
    --sidebar.state.js--
    {{/markdown}}

    {{#markdown}}
    vhxm.components.sidebar.state = {
      isOpen: m.prop(false),
      isSaving: m.prop(false)
    }
    {{/markdown}}

    {{#markdown}}
    --sidebar.constants.js--
    {{/markdown}}

    {{#markdown}}
    vhxm.components.sidebar.constants = {
      label: 'Title'
    }
    {{/markdown}}

    {{#markdown}}
    --sidebar.controller.js--
    {{/markdown}}

    {{#markdown}}
    vhxm.components.sidebar.controller = function() {
      var self = this;

      this.handleEvent = function() {
        // handle event (arbitrary example)
        vhxm.model.collections.saveDoc();
      }
    };
    {{/markdown}}

    {{#markdown}}
    --sidebar.ui.js--
    {{/markdown}}

    {{#markdown}}
    vhxm.components.sidebar.ui = {
      // sidebar parent component
      container: {
        controller: vhxm.components.sidebar.controller,
        view: function(ctrl) {
          return m('div', [
            m.component(vhxm.components.sidebar.ui.sub_component),
            m('a', { onclick: ctrl.handleEvent }, 'Save');
          ]);
        }
      },
      // sidebar sub-component
      sub_component: {
        view: function() {
          return m('input', { name: 'title' }, vhxm.components.sidebar.constants.label);
        }
      }
    }
  {{/markdown}}
  </section>
</template>
